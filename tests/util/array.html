<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8">
	<title>QUnit</title>
	<script>function base(level){document.write("<base href=\""+location.href.replace(/\/[^\/]*$/,"/")+level+"\"/>")}</script>
	<script>
	base("../../");

	var require = {
			baseUrl	: "src/script",
		};
	</script>
	<link  href="external/qunit/qunit/qunit.css" rel="stylesheet"/>
	<script src="external/qunit/qunit/qunit.js"></script>
	<script src="src/script/require.js"></script>
</head>
<body>
	<h1 id="qunit-header">QUnit</h1>
	<h2 id="qunit-banner"></h2>
	<h2 id="qunit-userAgent"></h2>
	<ol id="qunit-tests"></ol>
	<div id="qunit-fixture">test markup, will be hidden</div>
	<script>
	var moduleName = "util/array";

	module(moduleName);

	asyncTest("require", function() {
		require([moduleName], function(mod){
			ok(true, moduleName + " loaded via require.");

			ok(mod, moduleName + " module object exists.");

			start();
		});
	});

	asyncTest(".unsplice()", function() {

		require([moduleName], function(mod){

			var arr		= [ "A", "B", "C", "D", "E", "F", "G", "H", "I" ],
				arrBase	= [ "A", "B", "F", "G", "H", "I" ],
				arrAdd	= ["C","D","E"],

				obj		= { 0:"A", 1:"B", 2:"C", 3:"D", 4:"E", 5:"F", 6:"G", 7:"H", 8:"I", length:9 },
				objBase	= { 0:"A", 1:"B", 2:"F", 3:"G", 4:"H", 5:"I", length:6 },
				objAdd	= { 0:"C", 1:"D", 2:"E", length:3 },

				t;

			t = [].concat(arrBase);
			mod.unsplice( t, arrAdd, 2 );
			deepEqual(
				t,
				arr,
				".unsplice( [ \"A\", \"B\", \"F\", \"G\", \"H\", \"I\" ], [\"C\",\"D\",\"E\"], 2 )"
			);

			t = [].concat(arrBase);
			mod.unsplice( t, objAdd, 2 );
			deepEqual(
				t,
				arr,
				".unsplice( [ \"A\", \"B\", \"F\", \"G\", \"H\", \"I\" ], { 0:\"C\", 1:\"D\", 2:\"E\", length:3 }, 2 )"
			);

			t = $.extend({},objBase);
			mod.unsplice( t, arrAdd, 2 );
			deepEqual(
				t,
				obj,
				".unsplice( { 0:\"A\", 1:\"B\", 2:\"F\", 3:\"G\", 4:\"H\", 5:\"I\", length:6 }, [\"C\",\"D\",\"E\"], 2 )"
			);

			t = $.extend({},objBase);
			mod.unsplice( t, objAdd, 2 );
			deepEqual(
				t,
				obj,
				".unsplice( { 0:\"A\", 1:\"B\", 2:\"F\", 3:\"G\", 4:\"H\", 5:\"I\", length:6 }, { 0:\"C\", 1:\"D\", 2:\"E\", length:3 }, 2 )"
			);

			t = mod.unsplice( $("h2"), $("h1"), 1 );
			equal(
				t.length,
				3,
				".unsplice( $(\"h2\"), $(\"h1\"), 0 ).length"
			);
			equal(
				t.eq(1).is("h1"),
				true,
				".unsplice( $(\"h2\"), $(\"h1\"), 0 ).eq(1).is(\"h1\")"
			);

			start();
		});

	});
	</script>
</body>
</html>